## Деревья

Дерево — структура данных, моделирующая иерархическое отношение родитель-ребёнок между своими элементами.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_01_trees_1596228104.png)

_Пример дерева_

Элементы дерева называются узлами, или нодами. Верхний узел — корень дерева. У каждой ноды может быть только один родитель. У одного родителя может быть несколько детей. Все ноды, которые располагаются под одним родителем, — его потомки. Дети одного родителя называются соседями, братьями, или сиблингами (от англ. siblings — братья и сёстры). Ноды, у которых нет детей, — листьями дерева.

Расстояние от ноды до корня называется его глубиной. Расстояние от корня до самой глубокой ноды — высотой дерева.

Каждый элемент дерева содержит значение, ссылку на родителя и ссылки на дочерние элементы. При этом дочерние элементы не имеют связей между собой.

Деревья широко применяют в задачах. Вы уже работали с ними:

![image](https://pictures.s3.yandex.net/resources/Screenshot_2020-05-13_at_21.37.41_1596228140.png)

_DOM реализован как дерево_

Например, DOM реализован в виде дерева. Каждая DOM-нода имеет детей и родителей, корень этого дерева — нода `<html>`.

Существуют различные типы деревьев. Большинство направлены на решение определённых задач. Деревья отличаются друг от друга дополнительными ограничениями в отношениях между их элементами. В этом уроке мы изучим основные типы деревьев, которые широко применяются на практике.

## Бинарное дерево (Binary tree)

В бинарном дереве каждый родитель имеет максимум 2 ребёнка. Да, так просто.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_02_trees_1596228175.png)

_Бинарное дерево_

Реализация бинарного дерева похожа на двусвязный список. У каждой ноды есть значение и две ссылки — на левого и на правого ребёнка. Если детей нет, ссылки будут `null`:

Детей в таком дереве делят по их расположению относительно родителя — на левые и правые.

Бинарное дерево бывает:

-   сбалансированное;
-   завершённое;
-   полное;
-   идеальное.

Бинарное дерево, в котором глубины любых двух листьев отличаются друг от друга не более, чем на 1, называется **сбалансированным** (balanced binary tree). То есть глубины листьев равны либо какой-то лист расположен на 1 глубже.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_03_trees_1596228216.png)

_Сбалансированные и несбалансированные бинарные деревья_

Бинарное дерево, в котором либо полностью заполнены все слои, либо только последний слой заполнен не полностью и заполняется слева направо, называется **завершённым** (complete binary tree). Завершённое дерево всегда сбалансированно.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_04_trees_1596228275.png)

_Завершённые и незавершённые бинарные деревья_

Бинарное дерево, в котором все ноды, кроме листьев, имеют по два ребёнка, называется **полным** (full binary tree).

![image](https://pictures.s3.yandex.net/resources/S4_04.5_05_trees_1596228311.png)

_Полные и неполные бинарные деревья_

Полное и завершённое бинарное дерево называется **идеальным** (perfect binary tree).

![image](https://pictures.s3.yandex.net/resources/S4_04.5_06_trees_1596228364.png)

_Идеальные и неидеальные бинарные деревья_

Реализация бинарного дерева похожа на двусвязный список. У каждой ноды есть значение и три ссылки — на левого ребёнка, на правого и на родителя. Если детей нет, ссылки будут `null`. Родителя нет только у корневой ноды.

## Бинарное дерево поиска (Binary search tree, BST)

В бинарном дереве поиска потомки со значениями меньше родителя располагаются слева от него, а потомки со значениями больше родителя — справа.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_07_trees_1596228413.png)

_Бинарное дерево поиска_

Значениями могут быть не только числа, но и всё, для чего определяют отношение больше либо меньше.

## Бинарная куча (Binary heap)

Бинарная куча — это бинарное дерево, в котором все потомки меньше либо больше, чем их родители.

![image](https://pictures.s3.yandex.net/resources/S4_04.5_08_trees_1596228443.png)

_Бинарная куча_

Если элементы располагаются по убыванию, то есть потомки меньше родителя, бинарная куча называется max heap. Если по возрастанию — min heap. Задачи с max heap и min heap решают аналогично. Поэтому рассмотрим только max heap.

Свойства бинарной кучи: 1. Значения в любой вершине больше, чем значения её потомков. 2. Дерево завершённое.

В отличие от других бинарных деревьев, бинарную кучу удобно хранить в массиве:

![image](https://pictures.s3.yandex.net/resources/S4_04.5_09_massiv_1596228471.png)

_Бинарная куча в массиве_

Левый ребёнок элемента под индексом `i` располагается в индексе `2i + 1`, а правый — в `2i + 2`. Индекс родителя `i`\-го элемента ищут по формуле `floor((n-1)/2)`.

В этом уроке вы познакомились с бинарными деревьями. В следующем уроке рассмотрим операции с ними и их сложность.
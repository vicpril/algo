Спринт 2/12: Алгоритмы → Тема 5/9: Спринт IV → Урок 1/3

## Хеш-таблицы

Структура данных, которая хранит пары типа ключ-значение. В хеш-таблице можно добавлять новые пары, искать значения по ключу и удалять пары по ключу.

![image](https://pictures.s3.yandex.net/resources/S4_04.4_01_hash_1598887510.png)

_Хеш-таблица_

Ключи и значения хеш-таблицы — любые типы данных. Все ключи в таблице должны быть уникальны.

Как и массив, хеш-таблица — распространённая структура данных, и многие языки программирования имеют встроенную её реализацию. В JavaScript тип `Object` — хеш-таблица с единственным ограничением, что ключи — только строки. Тип `Map` — тоже хеш-таблица, но в ней ключи — любые типы данных.

## Хеширование

Хеширующий алгоритм или хеширующая функция — важная часть хеш-таблицы. Хеш-функция переводит ключ в число. Процесс называется хешированием, а полученное число — хешем. Хеш нужен, чтобы индексировать элементы в хеш-таблице.

![image](https://pictures.s3.yandex.net/resources/S4_04.4_02_hashaddelement_1598887599.png)

_Добавление элементов в хеш-таблицу_

На схеме ключ `Bill` получил хеш `3`. Мы можем вызывать хеширующую функцию бесконечно много раз с ключом `Bill`, но она всегда выдаёт цифру `3`. Это означает, что хеширующая функция идемпотентная. То есть при вызове одного и того же ключа, хеширующая функция выдаёт одинаковый результат.

Кроме этого, хеширующая функция должна быстро работать со сложностью `О(1)`, чтобы не зависеть от размера ключа. Ведь получение и добавление любых элементов в хеш-таблицу должно занимать одинаковое время.

Числа, которые выдаёт хеш-функция должны распределяться равномерно. Если хеш-функция выдаёт близкие значения друг к другу, хеши двух разных ключей могут совпасть — произойдёт коллизия.

Коллизия — ситуация, когда хеш двух разный ключей совпадает.

Написать хорошую хеширующую функцию, которая не выдаёт коллизию, — сложно. Этому обучаются отдельно.

На схеме выше хеш-таблица состоит всего из 7 элементов. Это мало. Поэтому даже хорошая хеширующая функция не поможет избежать коллизий.

Возьмём хорошую хеширующую функцию и запустим на нескольких значениях:

Мы использовали стандартную хеширующую функцию из языка Python. Диапазон значений, в которых она работает — очень большой. Кроме того, здесь нет коллизий. Но размер хеш-таблицы — 7, а все значения в ней сильно больше или меньше 7. Поэтому мы не можем их использовать. Тогда приведём их к диапазону от 0 до 6. Для это поделим каждое число по модулю на размер хеш-таблицы:

У ключей `Bill` и `Bob` одинаковый хеш — `3`. Мы получили коллизию. Если в эту хеш-таблицу добавить значения одновременно по ключам `Bill` и `Bob`, последнее значение перетрёт предыдущее. Тогда хеш-таблица станет бесполезной. В таких случаях применяют методы разрешения коллизий. Их вы изучите в следующем уроке.